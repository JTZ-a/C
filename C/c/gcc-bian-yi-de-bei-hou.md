---
description: è¿™ä¸€èŠ‚æˆ‘ä»¬æ·±å…¥ C è¯­è¨€ç¼–è¯‘çš„å‡ ä¸ªè¿‡ç¨‹æ¥è¿›è¡Œäº†è§£
---

# ğŸš² Gcc ç¼–è¯‘çš„èƒŒå

## å‰è¨€

åœ¨ä»¥å¾€çš„å­¦ä¹ è¿‡ç¨‹ä¸­, æˆ‘ä»¬çŸ¥é“ C è¯­è¨€çš„æ‰§è¡Œçš„å››å¤§æµç¨‹ : é¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–ã€é“¾æ¥,&#x20;

åœ¨è¿™é‡Œæˆ‘å·ä¸ªæ‡’ä½¿ç”¨ C++ æ¥ä½œä¸ºè¡¨ç¤º (ä¸¤ä¸ªè¯­è¨€çš„å¤„ç†æµç¨‹å¤§è‡´éƒ½ä¸€æ ·)

<figure><img src="../.gitbook/assets/image.png" alt=""><figcaption><p>æ¥æº: https://hackingcpp.com/cpp/hello_world.html</p></figcaption></figure>

## Preprocessor (é¢„å¤„ç†)

é¢„å¤„ç†æ˜¯ C ç¨‹åºä»æºä»£ç å˜æˆå¯æ‰§è¡Œç¨‹åºçš„ç¬¬ä¸€æ­¥, åœ¨è¿™ä¸€æ­¥ä¸­ç¼–è¯‘å™¨ä¸»è¦åšçš„æ“ä½œæ˜¯:

1. é¢„å¤„ç†æŒ‡ä»¤å¤„ç†ï¼šé¢„å¤„ç†å™¨ä¼šæ‰«ææºä»£ç ä¸­ä»¥ `#` å¼€å¤´çš„é¢„å¤„ç†æŒ‡ä»¤ï¼Œå¹¶æ ¹æ®æŒ‡ä»¤è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚å¸¸è§çš„é¢„å¤„ç†æŒ‡ä»¤åŒ…æ‹¬ `#include`ã€`#define`ã€`#ifdef`ã€`#ifndef`ã€`#if`ã€`#else`ã€`#endif` ç­‰ã€‚é¢„å¤„ç†æŒ‡ä»¤å¯ä»¥ç”¨äºåŒ…å«å¤´æ–‡ä»¶ã€å®å®šä¹‰ã€æ¡ä»¶ç¼–è¯‘ç­‰æ“ä½œã€‚
2. å¤´æ–‡ä»¶åŒ…å«ï¼šé€šè¿‡ `#include` æŒ‡ä»¤ï¼Œé¢„å¤„ç†å™¨å¯ä»¥å°†å…¶ä»–å¤´æ–‡ä»¶çš„å†…å®¹æ’å…¥å½“å‰æºæ–‡ä»¶ä¸­ã€‚è¿™æ ·å¯ä»¥åœ¨æºä»£ç ä¸­ä½¿ç”¨å…¶ä»–æ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°ã€å˜é‡å’Œç±»å‹å£°æ˜ï¼Œæä¾›äº†ä»£ç çš„æ¨¡å—åŒ–å’Œé‡ç”¨æ€§ã€‚
3. å®å±•å¼€ï¼šé¢„å¤„ç†å™¨ä¼šå¤„ç† `#define` æŒ‡ä»¤å®šä¹‰çš„å®ï¼Œå¹¶å°†å®åœ¨ä»£ç ä¸­çš„å¼•ç”¨å±•å¼€ä¸ºå®å®šä¹‰çš„å†…å®¹ã€‚è¿™æ ·å¯ä»¥åœ¨æºä»£ç ä¸­ä½¿ç”¨å®æ¥è¿›è¡Œä»£ç æ›¿æ¢ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚
4. æ¡ä»¶ç¼–è¯‘ï¼šé€šè¿‡ `#ifdef`ã€`#ifndef`ã€`#if` ç­‰æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œé¢„å¤„ç†å™¨å¯ä»¥æ ¹æ®æ¡ä»¶åˆ¤æ–­é€‰æ‹©æ€§åœ°ç¼–è¯‘éƒ¨åˆ†ä»£ç ã€‚è¿™æ ·å¯ä»¥æ ¹æ®ä¸åŒçš„ç¼–è¯‘é€‰é¡¹æˆ–ç¯å¢ƒæ¡ä»¶ï¼Œåœ¨ä¸åŒçš„æƒ…å†µä¸‹ç¼–è¯‘ä¸åŒçš„ä»£ç ã€‚
5. æ³¨é‡Šåˆ é™¤ï¼šé¢„å¤„ç†å™¨ä¼šåˆ é™¤æºä»£ç ä¸­çš„æ³¨é‡Šï¼Œè¿™æ ·æ³¨é‡Šçš„å†…å®¹åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°†ä¸è¢«è€ƒè™‘ã€‚

> ä¸»è¦è¿˜æ˜¯å½’å±äºä¸¤æ­¥ : é¢„å¤„ç†æŒ‡ä»¤çš„å¤„ç†ä»¥åŠæ³¨é‡Šåˆ é™¤

åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹é¢„å¤„ç†çš„è¾“å‡º (æœ‰ç‚¹é•¿), ä»è¾“å‡ºä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶ä¸»è¦åšçš„æ“ä½œ, å…¶å®å¯ä»¥å°†å…¶å½’å±äºèµ„æºçš„å‡†å¤‡

```sh
$ gcc -E hello.c
```

## ç¼–è¯‘

åœ¨ç¼–è¯‘ä¹‹å‰, C è¯­è¨€ç¼–è¯‘å™¨ä¼šè¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æ, æ¥ç€ä¼šå°†æˆ‘ä»¬çš„æºä»£ç <mark style="color:red;">**ç¼–è¯‘**</mark>æˆä¸­é—´è¯­è¨€, å³æ±‡ç¼–è¯­è¨€

> 1. å¦‚æœæˆ‘ä»¬ä½¿ç”¨ç¼–è¯‘å™¨æ¯”å¦‚ VS ã€Clion  ç­‰ç¼–è¯‘å™¨çš„è¯, æˆ‘ä»¬åœ¨ç¼–å†™å…¶é—´ä¹Ÿä¼šè¿›è¡Œè¯­æ³•çš„åˆ†æ, ä½†æ˜¯è¿™ä¸ç¼–è¯‘é˜¶æ®µçš„è¯­æ³•åˆ†ææ²¡æœ‰ä»»ä½•å…³ç³»
> 2. å¯¹äºè§£é‡Šå‹è¯­è¨€æ¥è¯´, ä¹Ÿä¼šç»å†è¯æ³•åˆ†æã€è¯­æ³•åˆ†æé˜¶æ®µ, ä¸ç®¡ä¹‹å<mark style="color:red;">**å¹¶ä¸ä¼šè¿›è¡Œç¼–è¯‘**</mark>, è€Œæ˜¯ "è§£é‡Š" , è¾¹è§£é‡Šè¾¹æ‰§è¡Œ

{% tabs %}
{% tab title="README" %}
é€šå¸¸æ¥è¯´æˆ‘ä»¬ä¼šæ‰§è¡Œä¸‹é¢çš„è¯­è¨€æ¥å®ç°ç¼–è¯‘çš„è¿‡ç¨‹

```bash
$ gcc -S hello.c
```
{% endtab %}

{% tab title="è¯­æ³•æ£€æŸ¥" %}
å¦‚æœä»…ä»…å¸Œæœ›è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œå¯ä»¥ç”¨ `gcc` çš„ `-fsyntax-only` é€‰é¡¹

```sh
â”Œâ”€â”€(jtzã‰¿JTZ)-[~/C]
â””â”€$ cat hello.c
#include <stdio.h>
int main(){
    printf("hello world")
    return 0;
}

â”Œâ”€â”€(jtzã‰¿JTZ)-[~/C]
â””â”€$ gcc -fsyntax-only hello.c
hello.c: In function â€˜mainâ€™:
hello.c:3:26: error: expected â€˜;â€™ before â€˜returnâ€™
    3 |     printf("hello world")
      |                          ^
      |                          ;
    4 |     return 0;
      |     ~~~~~~

```
{% endtab %}

{% tab title="ç¼–è¯‘" %}
å½“è¯­æ³•æ£€æŸ¥é€šè¿‡ä¹‹åå°±è¯¥æ‰§è¡Œç¼–è¯‘æ“ä½œ, å°†æºä»£ç ç¼–è¯‘ä¸ºæ±‡ç¼–è¯­è¨€

```sh
â”Œâ”€â”€(jtzã‰¿JTZ)-[~/C]
â””â”€$ gcc -S hello.c

â”Œâ”€â”€(jtzã‰¿JTZ)-[~/C]
â””â”€$ cat hello.s
        .file   "hello.c"
        .text
        .section        .rodata
.LC0:
        .string "hello world"
        .text
        .globl  main
        .type   main, @function
main:
.LFB0:
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        movq    %rsp, %rbp
        .cfi_def_cfa_register 6
        leaq    .LC0(%rip), %rax
        movq    %rax, %rdi
        movl    $0, %eax
        call    printf@PLT
        movl    $0, %eax
        popq    %rbp
        .cfi_def_cfa 7, 8
        ret
        .cfi_endproc
.LFE0:
        .size   main, .-main
        .ident  "GCC: (Debian 12.2.0-14) 12.2.0"
        .section        .note.GNU-stack,"",@progbits

```
{% endtab %}
{% endtabs %}

## æ±‡ç¼–

æœ¬è´¨ä¸Šæ¥è¯´æ±‡ç¼–è¿˜æ˜¯ç¿»è¯‘çš„è¿‡ç¨‹, åªä¸è¿‡è¿™æ¬¡æ˜¯å°†æ±‡ç¼–ä»£ç ç¼–è¯‘æˆæœºå™¨ä»£ç , ä¸è¿‡æ­¤æ—¶ç”Ÿæˆçš„ä»£ç è¿˜æ˜¯ä¸å¯ä»¥è¿è¡Œ

```bash
â”Œâ”€â”€(jtzã‰¿JTZ)-[~/C]
â””â”€$ file hello.o
hello.o: cannot open `hello.o' (No such file or directory)
â”Œâ”€â”€(jtzã‰¿JTZ)-[~/C]
â””â”€$ gcc -C hello.s -o hello.o

â”Œâ”€â”€(jtzã‰¿JTZ)-[~/C]
â””â”€$ file hello.o
hello.o: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=87500146a349df57a9e19eb533796c446865a5b2, for GNU/Linux 3.2.0, not stripped
```

## é“¾æ¥

